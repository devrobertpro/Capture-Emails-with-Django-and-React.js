'use strict';const e=React.createElement,useEffect=React.useEffect,useState=React.useState,rootURL="http://127.0.0.1:8000",getCookies=a=>{// vanilla javascript
// docs have jquery
var b={};return document.cookie&&""!==document.cookie&&document.cookie.split(";").forEach(function(a){var c=a.trim().match(/(\w+)=(.*)/);void 0!==c&&(b[c[1]]=decodeURIComponent(c[2]))}),a?b[a]:b},CaptureEmailUI=a=>{const[b,c]=useState(""),[d,e]=useState(""),{config:f}=a;return React.createElement("form",{className:f.formClass,onSubmit:a=>{a.preventDefault();const d=getCookies("csrftoken");if(console.log("token",d),""===b||void 0===b||null===b)return void e("Value is required");// send to backend!
const f=JSON.stringify({email:b}),g=new XMLHttpRequest;g.open("POST",`${rootURL}/api/capture/email/`,!0),g.setRequestHeader("Content-Type","application/json"),g.setRequestHeader("X-CSRFTOKEN",d),g.onload=()=>{console.log(g.responseText),201===g.status?(alert("Success!"),c(""),e("")):alert("Error")},g.send(f)}},React.createElement("input",{className:f.inputClass,value:b,onChange:a=>{c(a.target.value),e("")},type:"email",placeholder:"your email",required:!0}),d&&React.createElement("p",{className:f.errorClass},d),"false"===f.btnShow?"":React.createElement("p",null,React.createElement("button",{className:f.btnClass,type:"submit"},"Save Email")))};// Find all DOM containers, and render our component into them.
var containers=document.querySelectorAll(".cap-ui");containers.forEach(a=>{// render the component into the DOM
ReactDOM.render(e(CaptureEmailUI,{config:a.dataset}),a)});
