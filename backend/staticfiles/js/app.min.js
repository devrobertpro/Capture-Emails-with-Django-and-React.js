'use strict';const e=React.createElement,useEffect=React.useEffect,useState=React.useState,rootURL="http://127.0.0.1:8000",CaptureEmailUI=a=>{const[b,c]=useState(""),[d,e]=useState(""),[f,g]=useState("");useEffect(()=>{const a=new XMLHttpRequest;// async
a.open("GET",`${rootURL}/api/capture/token/`,!0),a.setRequestHeader("Content-Type","application/json"),a.onload=()=>{if(200===a.status){const b=JSON.parse(a.responseText);g(b.csrfToken)}else alert("Error")},a.send()},[]);console.log(a);const{config:h}=a;return React.createElement("form",{className:h.formClass,onSubmit:a=>{if(a.preventDefault(),""===b||void 0===b||null===b)return void e("Value is required");// send to backend!
const d=JSON.stringify({email:b}),g=new XMLHttpRequest;g.open("POST",`${rootURL}/api/capture/email/`,!0),g.setRequestHeader("Content-Type","application/json"),g.setRequestHeader("X-CSRFTOKEN",f),g.onload=()=>{console.log(g.responseText),201===g.status?(alert("Success!"),c(""),e("")):alert("Error")},g.send(d)}},React.createElement("input",{className:h.inputClass,value:b,onChange:a=>{c(a.target.value),e("")},type:"email",placeholder:"your email",required:!0}),d&&React.createElement("p",{className:h.errorClass},d),"false"===h.btnShow?"":React.createElement("p",null,React.createElement("button",{className:h.btnClass,type:"submit"},"Save Email")))};// Find all DOM containers, and render our component into them.
var containers=document.querySelectorAll(".cap-ui");containers.forEach(a=>{console.log(a.dataset);a.dataset.userid;// render the component into the DOM
ReactDOM.render(e(CaptureEmailUI,{config:a.dataset}),a)});
