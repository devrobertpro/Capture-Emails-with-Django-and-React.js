'use strict';const e=React.createElement,useEffect=React.useEffect,useState=React.useState,rootURL="http://127.0.0.1:8000",CaptureEmailUI=()=>{const[a,b]=useState(""),[c,d]=useState(""),[e,f]=useState("");useEffect(()=>{const a=new XMLHttpRequest;// async
a.open("GET",`${rootURL}/api/capture/token/`,!0),a.setRequestHeader("Content-Type","application/json"),a.onload=()=>{if(200===a.status){const b=JSON.parse(a.responseText);f(b.csrfToken)}else alert("Error")},a.send()},[]);return React.createElement("form",{onSubmit:c=>{if(c.preventDefault(),""===a||void 0===a||null===a)return void d("Value is required");// send to backend!
const f=JSON.stringify({email:a}),g=new XMLHttpRequest;g.open("POST",`${rootURL}/api/capture/email/`,!0),g.setRequestHeader("Content-Type","application/json"),g.setRequestHeader("X-CSRFTOKEN",e),g.onload=()=>{console.log(g.responseText),201===g.status?(alert("Success!"),b(""),d("")):alert("Error")},g.send(f)}},React.createElement("input",{value:a,onChange:a=>{b(a.target.value),d("")},type:"email",placeholder:"your email",required:!0}),c&&React.createElement("p",null,c),React.createElement("button",{type:"submit"},"Save Email"))};// Find all DOM containers, and render our component into them.
var containers=document.querySelectorAll(".cap-ui");containers.forEach(a=>{// Read the user ID from a data-* attribute.
const b=a.dataset.userid;// render the component into the DOM
ReactDOM.render(e(CaptureEmailUI,{userid:b}),a)});
